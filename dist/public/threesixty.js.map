{"version":3,"sources":["webpack:///webpack/bootstrap 15d599fe4b7eb5b2c7c2","webpack:///./src/threesixty.js"],"names":["Detector","canvas","window","CanvasRenderingContext2D","webgl","document","createElement","WebGLRenderingContext","getContext","e","workers","Worker","fileapi","File","FileReader","FileList","Blob","getWebGLErrorMessage","element","id","style","fontFamily","fontSize","fontWeight","textAlign","background","color","padding","width","margin","self","innerHTML","join","addGetWebGLMessage","parameters","parent","undefined","body","appendChild","ThreeSixty","THREE","defaults","crossOrigin","clickAndDrag","keyboardControls","fov","fovMin","fovMax","hideControls","lon","lat","loop","debug","flatProjection","autoplay","div","video","attachContainer","options","time","Date","getTime","controls","generateUUID","requestAnimationId","isVideo","isPhoto","isFullscreen","mouseDown","dragStart","originalWidth","querySelectorAll","offsetWidth","originalHeight","offsetHeight","classList","add","className","getAttribute","setAttribute","attachVideo","createMediaPlayer","createControls","d","uuid","replace","c","r","Math","random","floor","toString","scene","Scene","camera","PerspectiveCamera","setLens","renderer","WebGLRenderer","CanvasRenderer","setSize","autoClear","setClearColor","domElement","createAnimation","texture","generateMipmaps","minFilter","LinearFilter","magFilter","format","RGBFormat","mesh","Mesh","SphereGeometry","MeshBasicMaterial","map","scale","x","animate","ImageUtils","loadTexture","isIE","loadingElem","showWaiting","display","addEventListener","percent","buffered","length","end","duration","bytesTotal","bufferedBytes","cpct","round","event","console","error","showError","paused","currentTime","children","durMin","durSec","timeMin","timeSec","navigator","appName","userAgent","match","videocanvas","Texture","videoWidth","height","videoHeight","xhr","XMLHttpRequest","open","responseType","onload","srcElement","status","vid","URL","createObjectURL","response","hideWaiting","play","videoReady","src","onreadystatechange","oEvent","readyState","send","log","playPauseControl","controlsElem","attachControlEvents","onMouseMove","bind","onMouseWheel","onMouseDown","onMouseUp","onKeyDown","onKeyUp","onKeyArrowPress","focus","onresize","resizeGL","onPointerDownPointerX","clientX","onPointerDownPointerY","clientY","rect","getBoundingClientRect","relativeX","pageX","left","onPointerDownLon","onPointerDownLat","y","pageY","top","wheelSpeed","wheelDeltaY","wheelDelta","detail","preventDefault","onProgressClick","HAVE_ENOUGH_DATA","keyCode","keydown","pressEvent","createEvent","initCustomEvent","dispatchEvent","offset","pressDelay","setTimeout","requestAnimationFrame","drawImage","ct","needsUpdate","render","max","min","phi","PI","theta","cx","sin","cos","cy","cz","lookAt","Vector3","position","z","clear","pause","loadVideo","videoFile","unloadVideo","loadPhoto","photoFile","w","h","aspect","updateProjectionMatrix","loading","destroy","cancelAnimationFrame","dispose","parentNode","removeChild","module","exports"],"mappings":"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","file":"threesixty.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/public/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 15d599fe4b7eb5b2c7c2\n **/","// TODO strip out options\n// TODO strip out video data source and add video html element to grab src\n\nconst Detector = {\n  canvas: !! window.CanvasRenderingContext2D,\n  webgl: ( function () { try { var canvas = document.createElement( 'canvas' ); return !! window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ); } catch( e ) { return false; } } )(),\n  workers: !! window.Worker,\n  fileapi: window.File && window.FileReader && window.FileList && window.Blob,\n  getWebGLErrorMessage: () => {\n    let element = document.createElement('div')\n    element.id = 'webgl-error-message'\n    element.style.fontFamily = 'monospace'\n    element.style.fontSize = '13px'\n    element.style.fontWeight = 'normal'\n    element.style.textAlign = 'center'\n    element.style.background = '#fff'\n    element.style.color = '#000'\n    element.style.padding = '1.5em'\n    element.style.width = '800px'\n    element.style.margin = '5em auto 0'\n    if (!self.webgl) {\n      element.innerHTML = window.WebGLRenderingContext ? [\n        'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\n        'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n      ].join( '\\n' ) : [\n        'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\n        'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n      ].join( '\\n' );\n    }\n\n    return element;\n  },\n  addGetWebGLMessage: (parameters) => {\n    let parent, id, element\n\n    parameters = parameters || {}\n\n    parent = parameters.parent !== undefined ? parameters.parent : document.body\n    id = parameters.id !== undefined ? parameters.id : 'oldie'\n\n    element = Detector.getWebGLErrorMessage()\n    element.id = id\n\n    parent.appendChild(element)\n  }\n}\n\nconst ThreeSixty = (THREE, Detector, window, document, undefined) => {\n  let self = {},\n      defaults = {\n        crossOrigin: 'anonymous',\n        clickAndDrag: false,\n\t      keyboardControls: true,\n        fov: 35,\n        fovMin: 3,\n        fovMax: 100,\n        hideControls: false,\n        lon: 0,\n        lat: 0,\n        loop: \"loop\",\n        debug: false,\n        flatProjection: false,\n        autoplay: true\n      },\n      div,\n      video\n\n  const attachContainer = (element) => {\n    self.element = element\n    self.options = defaults\n\n    // instantiate some local variables we're going to need\n    self.time = new Date().getTime()\n    self.controls = {}\n    self.id = generateUUID()\n\n    self.requestAnimationId = '' // used to cancel requestAnimationFrame on destroy\n    self.isVideo = false\n    self.isPhoto = false\n    self.isFullscreen = false\n    self.mouseDown = false\n    self.dragStart = {}\n\n    self.lat = self.options.lat;\n    self.lon = self.options.lon;\n    self.fov = self.options.fov;\n\n    // save our original height and width for returning from fullscreen\n    self.originalWidth = self.element.querySelectorAll('canvas').offsetWidth\n    self.originalHeight = self.element.querySelectorAll('canvas').offsetHeight\n\n    // add a class to our element so it inherits the appropriate styles\n    if (self.element.classList)\n      self.element.classList.add('default')\n    else\n      self.element.className += ' ' + 'default'\n\n    // add tabindex attribute to enable the focus on the element (required for keyboard controls)\n    if(self.options.keyboardControls && !self.element.getAttribute(\"tabindex\")) {\n      self.element.setAttribute(\"tabindex\", \"1\")\n    }\n  }\n\n  const attachVideo = (element) => {\n    video = element\n    createMediaPlayer()\n    createControls()\n  }\n\n  const generateUUID = () => {\n    let d = new Date().getTime(),\n        uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n          let r = (d + Math.random()*16)%16 | 0\n          d = Math.floor(d/16);\n          return (c==='x' ? r : (r&0x7|0x8)).toString(16);\n        })\n    return uuid\n  }\n\n  const createMediaPlayer = () => {\n    // make a self reference we can pass to our callbacks\n    // create a local THREE.js scene\n    self.scene = new THREE.Scene()\n\n    // create ThreeJS camera\n    self.camera = new THREE.PerspectiveCamera(self.fov, self.element.offsetWidth / self.element.offsetHeight, 0.1, 1000)\n    self.camera.setLens(self.fov)\n\n    // create ThreeJS renderer and append it to our object\n    self.renderer = Detector.webgl? new THREE.WebGLRenderer(): new THREE.CanvasRenderer()\n    self.renderer.setSize(self.element.offsetWidth, self.element.offsetHeight)\n    self.renderer.autoClear = false\n    self.renderer.setClearColor(0x333333, 1)\n\n    // append the rendering element to self div\n    self.element.appendChild(self.renderer.domElement)\n\n    const createAnimation = () => {\n      self.texture.generateMipmaps = false\n      self.texture.minFilter = THREE.LinearFilter\n      self.texture.magFilter = THREE.LinearFilter\n      self.texture.format = THREE.RGBFormat\n\n      // create ThreeJS mesh sphere onto which our texture will be drawn\n      self.mesh = new THREE.Mesh(new THREE.SphereGeometry( 500, 80, 50 ), new THREE.MeshBasicMaterial({map: self.texture}))\n      self.mesh.scale.x = -1 // mirror the texture, since we're looking from the inside out\n      self.scene.add(self.mesh)\n\n      animate()\n    }\n\n    // figure out our texturing situation, based on what our source is\n    if(self.element.getAttribute('data-photo-src')) {\n      self.isPhoto = true\n      THREE.ImageUtils.crossOrigin = self.options.crossOrigin\n      self.texture = THREE.ImageUtils.loadTexture(self.element.getAttribute('data-photo-src'))\n      createAnimation()\n    } else {\n      if (video) {\n        // create loading overlay\n        let loadingElem = document.createElement('div')\n        if (loadingElem.classList)\n          loadingElem.classList.add('loading');\n        else\n          loadingElem.className += ' ' + 'loading'\n\n        loadingElem.innerHTML = `\n          <div class=\"icon waiting-icon\"></div>\n          <div class=\"icon error-icon\"><i class=\"fa fa-exclamation-triangle\" aria-hidden=\"true\"></i></div>\n        `\n        self.element.appendChild(loadingElem)\n        showWaiting()\n\n        self.isVideo = true\n\n        self.video = video\n        self.video.setAttribute('crossorigin', self.options.crossOrigin)\n        self.video.style.display = 'none'\n        self.video.loop = self.options.loop\n\n        // attach video player event listeners\n        self.video.addEventListener(\"ended\", () => {})\n\n        // Progress Meter\n        self.video.addEventListener(\"progress\", () => {\n          let percent = null\n          if (self.video && self.video.buffered && self.video.buffered.length > 0 && self.video.buffered.end && self.video.duration) {\n            percent = self.video.buffered.end(0) / self.video.duration\n          }\n          // Some browsers (e.g., FF3.6 and Safari 5) cannot calculate target.bufferered.end()\n          // to be anything other than 0. If the byte count is available we use self instead.\n          // Browsers that support the else if do not seem to have the bufferedBytes value and\n          // should skip to there. Tested in Safari 5, Webkit head, FF3.6, Chrome 6, IE 7/8.\n          else if (self.video && self.video.bytesTotal !== undefined && self.video.bytesTotal > 0 && self.video.bufferedBytes !== undefined) {\n            percent = self.video.bufferedBytes / self.video.bytesTotal\n          }\n\n          // Someday we can have a loading animation for videos\n          var cpct = Math.round(percent * 100)\n          if(cpct === 100) {\n            // do something now that we are done\n          } else {\n            // do something with self percentage info (cpct)\n          }\n        })\n\n        // Error listener\n        self.video.addEventListener('error', (event) => {\n          console.error(self.video.error)\n          showError()\n        })\n\n        self.video.addEventListener(\"timeupdate\", () => {\n          if (self.paused === false){\n            let percent = self.currentTime * 100 / self.duration\n            self.element.querySelectorAll('.controlsWrapper > .progress-bar')[0].children[0].setAttribute(\"style\", \"width:\" + percent + \"%;\")\n            self.element.querySelectorAll('.controlsWrapper > .progress-bar')[0].children[1].setAttribute(\"style\", \"width:\" + (100 - percent) + \"%;\")\n            //Update time label\n            let durMin = Math.floor(self.duration / 60),\n                durSec = Math.floor(self.duration - (durMin * 60)),\n                timeMin = Math.floor(self.currentTime / 60),\n                timeSec = Math.floor(self.currentTime - (timeMin * 60)),\n                duration = durMin + ':' + (durSec < 10 ? '0' + durSec : durSec),\n                currentTime = timeMin + ':' + (timeSec < 10 ? '0' + timeSec : timeSec)\n            self.element.querySelectorAll('.controls .timeLabel').innerHTML = (currentTime + ' / ' + duration)\n          }\n        })\n\n        // IE 11 and previous not supports THREE.Texture([video]), we must create a canvas that draws the video and use that to create the Texture\n        var isIE = navigator.appName == 'Microsoft Internet Explorer' || !!(navigator.userAgent.match(/Trident/) || navigator.userAgent.match(/rv 11/))\n        if (isIE) {\n          self.videocanvas = document.createElement('canvas')\n          self.texture = new THREE.Texture(self.videocanvas)\n          // set canvas size = video size when known\n          self.video.addEventListener('loadedmetadata', () => {\n            self.videocanvas.width = self.video.videoWidth;\n            self.videocanvas.height = self.video.videoHeight;\n            createAnimation()\n          })\n        } else {\n          self.texture = new THREE.Texture( self.video )\n        }\n\n        //force browser caching of the video to solve rendering errors with big videos\n        let xhr = new XMLHttpRequest()\n        xhr.open('GET', self.video.getAttribute('src'), true)\n        xhr.responseType = 'blob'\n        xhr.onload = function (e) {\n          if (e.srcElement.status === 200) {\n            let vid = URL.createObjectURL(e.srcElement.response)\n            //Video Play Listener, fires after video loads\n            self.video.addEventListener(\"canplaythrough\", () => {\n              if (self.options.autoplay === true) {\n                hideWaiting()\n                play()\n                self.videoReady = true\n              }\n            })\n\n            // set the video src and begin loading\n            self.video.src = vid\n          }\n        };\n\n        xhr.onreadystatechange = (oEvent) => {\n          if (xhr.readyState === 4) {\n            if (xhr.status !== 200) {\n              console.error('Video error: status ' + xhr.status)\n              showError()\n            }\n          }\n        }\n        xhr.send()\n\n        if(!isIE) createAnimation()\n      } else {\n        console.log(`Please add a video`)\n      }\n    }\n  }\n\n  const createControls = () => {\n    let playPauseControl = self.options.autoplay ? 'fa-pause' : 'fa-play',\n        controlsElem = document.createElement('div')\n\n    if (controlsElem.classList)\n      controlsElem.classList.add('controlsWrapper')\n    else\n      controlsElem.className += ' ' + 'controlsWrapper'\n\n    controlsElem.innerHTML = `\n      <div class=\"progress-bar\">\n        <div style=\"width: 0;\"></div><div style=\"width: 100%;\"></div>\n      </div>\n      <div class=\"controls\">\n        <a href=\"#\" class=\"playButton button fa '+ playPauseControl +'\"></a>\n        <span class=\"timeLabel\"></span>\n        <a href=\"#\" class=\"fullscreenButton button fa fa-expand\"></a>\n      </div>`\n\n    self.element.appendChild(controlsElem)\n\n    // hide controls if option is set\n    if(self.options.hideControls) {\n      self.element.querySelectorAll('.controls').style.display = 'none'\n    }\n\n    // wire up controller events to dom elements\n    attachControlEvents()\n  }\n\n  const attachControlEvents = () => {\n    self.element.addEventListener( 'mousemove', onMouseMove.bind(self), false )\n    self.element.addEventListener( 'touchmove', onMouseMove.bind(self), false )\n    self.element.addEventListener( 'mousewheel', onMouseWheel.bind(self), false )\n    self.element.addEventListener( 'DOMMouseScroll', onMouseWheel.bind(self), false )\n    self.element.addEventListener( 'mousedown', onMouseDown.bind(self), false)\n    self.element.addEventListener( 'touchstart', onMouseDown.bind(self), false)\n    self.element.addEventListener( 'mouseup', onMouseUp.bind(self), false)\n    self.element.addEventListener( 'touchend', onMouseUp.bind(self), false)\n\n    if(self.options.keyboardControls) {\n      self.element.addEventListener('keydown', onKeyDown.bind(self), false)\n      self.element.addEventListener('keyup', onKeyUp.bind(self), false)\n      // Used custom press event because for the arrow buttons is not throws the 'keypress' event\n      self.element.addEventListener('keyArrowPress', onKeyArrowPress.bind(self), false)\n      self.element.addEventListener('click', () => {\n        self.element.focus()\n      },false)\n    }\n\n    window.onresize = () => {\n      resizeGL(self.element.offsetWidth, self.element.offsetHeight)\n    }\n  }\n\n  const onMouseMove = (event) => {\n    self.onPointerDownPointerX = event.clientX\n    self.onPointerDownPointerY = -event.clientY\n\n    let rect = self.element.querySelectorAll('canvas')[0].getBoundingClientRect()\n    self.relativeX = event.pageX - rect.left\n\n    self.onPointerDownLon = self.lon\n    self.onPointerDownLat = self.lat\n\n    let x, y\n\n    if(self.options.clickAndDrag) {\n      if(self.mouseDown) {\n        x = event.pageX - self.dragStart.x\n        y = event.pageY - self.dragStart.y\n        self.dragStart.x = event.pageX\n        self.dragStart.y = event.pageY\n        self.lon += x\n        self.lat -= y\n      }\n    } else {\n      x = event.pageX - rect.left\n      y = event.pageY - rect.top\n\n      self.lon = ( x / self.element.querySelectorAll('canvas')[0].offsetWidth ) * 430 - 225\n      self.lat = ( y / self.element.querySelectorAll('canvas')[0].offsetHeight ) * -180 + 90\n    }\n  }\n\n  const onMouseWheel = (event) => {\n    let wheelSpeed = -0.01\n\n    // WebKit\n    if (event.wheelDeltaY) {\n      self.fov -= event.wheelDeltaY * wheelSpeed\n    // Opera / Explorer 9\n    } else if (event.wheelDelta) {\n      self.fov -= event.wheelDelta * wheelSpeed\n    // Firefox\n    } else if (event.detail) {\n      self.fov += event.detail * 1.0\n    }\n\n    if(self.fov < self.options.fovMin) {\n      self.fov = self.options.fovMin\n    } else if(self.fov > self.options.fovMax) {\n      self.fov = self.options.fovMax\n    }\n\n    self.camera.setLens(self.fov)\n    event.preventDefault()\n  }\n\n  const onMouseDown = (event) => {\n    self.mouseDown = true\n    self.dragStart.x = event.pageX\n    self.dragStart.y = event.pageY\n  }\n\n  const onProgressClick = (event) => {\n    if(self.isVideo && self.video.readyState === self.video.HAVE_ENOUGH_DATA) {\n      let percent =  self.relativeX / self.element.querySelectorAll('canvas').offsetWidth * 100\n      self.element.querySelectorAll('.controlsWrapper > .progress-bar')[0].children[0].setAttribute(\"style\", \"width:\" + percent + \"%;\")\n      self.element.querySelectorAll('.controlsWrapper > .progress-bar')[0].children[1].setAttribute(\"style\", \"width:\" + (100 - percent) + \"%;\")\n      self.video.currentTime = self.video.duration * percent / 100\n    }\n  }\n\n  const onMouseUp = (event) => {\n    self.mouseDown = false\n  }\n\n  const onKeyDown = (event) => {\n   let keyCode = event.keyCode\n   if (keyCode >= 37 && keyCode <= 40) {\n     event.preventDefault()\n     self.keydown = true\n     let pressEvent = document.createEvent('CustomEvent')\n     pressEvent.initCustomEvent(\"keyArrowPress\",true,true,{'keyCode':keyCode})\n     self.element.dispatchEvent(pressEvent)\n   }\n  }\n\n  const onKeyUp = (event) => {\n   let keyCode = event.keyCode;\n   if (keyCode >= 37 && keyCode <= 40) {\n     event.preventDefault()\n     self.keydown = false\n   }\n  }\n\n  const onKeyArrowPress = (event) => {\n   if (self.keydown) {\n     let keyCode = event.detail? event.detail.keyCode:null,\n         offset = 3,\n         pressDelay = 50,\n         element = self.element\n\n     event.preventDefault()\n     switch (keyCode) {\n       //Arrow left\n       case 37: self.lon -= offset;\n         break;\n       //Arrow right\n       case 39: self.lon += offset;\n         break;\n       //Arrow up\n       case 38: self.lat += offset;\n         break;\n       //Arrow down\n       case 40: self.lat -= offset;\n         break;\n     }\n     setTimeout(() => {\n       let pressEvent = document.createEvent('CustomEvent')\n       pressEvent.initCustomEvent(\"keyArrowPress\",true,true,{'keyCode':keyCode})\n       element.dispatchEvent(pressEvent)\n     },\n     pressDelay)\n   }\n  }\n\n  const animate = () => {\n    // set our animate function to fire next time a frame is ready\n    self.requestAnimationId = requestAnimationFrame(animate.bind(self))\n\n    if(self.isVideo) {\n      if ( self.video.readyState === self.video.HAVE_ENOUGH_DATA) {\n        if(self.videocanvas) {\n          self.videocanvas.getContext('2d').drawImage(self.video, 0, 0, self.videocanvas.width, self.videocanvas.height)\n        }\n        if(typeof(self.texture) !== \"undefined\" ) {\n          let ct = new Date().getTime()\n          if(ct - self.time >= 30) {\n            self.texture.needsUpdate = true\n            self.time = ct\n          }\n        }\n      }\n    }\n    render()\n  }\n\n  const render = () => {\n    self.lat = Math.max( - 85, Math.min( 85, self.lat))\n    self.phi = ( 90 - self.lat ) * Math.PI / 180\n    self.theta = self.lon * Math.PI / 180\n\n    let cx = 500 * Math.sin( self.phi ) * Math.cos( self.theta ),\n        cy = 500 * Math.cos( self.phi ),\n        cz = 500 * Math.sin( self.phi ) * Math.sin( self.theta )\n\n    self.camera.lookAt(new THREE.Vector3(cx, cy, cz))\n\n    // distortion\n    if(self.options.flatProjection) {\n      self.camera.position.x = 0\n      self.camera.position.y = 0\n      self.camera.position.z = 0\n    } else {\n      self.camera.position.x = - cx\n      self.camera.position.y = - cy\n      self.camera.position.z = - cz\n    }\n\n    self.renderer.clear()\n    self.renderer.render( self.scene, self.camera )\n  }\n\n  const play = () => {\n    //code to play media\n    self.video.play()\n  }\n\n  const pause = () => {\n    //code to stop media\n    self.video.pause()\n  }\n\n  const loadVideo = (videoFile) => {\n    self.video.src = videoFile\n  }\n\n  const unloadVideo = () => {\n    // overkill unloading to avoid dreaded video 'pending' bug in Chrome. See https://code.google.com/p/chromium/issues/detail?id=234779\n    self.pause()\n    self.video.src = ''\n    self.video.setAttribute('src', '')\n  }\n\n  const loadPhoto = (photoFile) => {\n    self.texture = THREE.ImageUtils.loadTexture( photoFile );\n  }\n\n  const resizeGL = (w, h) => {\n    self.renderer.setSize(w, h)\n    self.camera.aspect = w / h\n    self.camera.updateProjectionMatrix()\n  }\n\n  const showWaiting = () => {\n    let loading = self.element.querySelectorAll('.loading')[0]\n    loading.querySelectorAll('.waiting-icon')[0].style.display = ''\n    loading.querySelectorAll('.error-icon')[0].style.display = 'none'\n    loading.style.display = ''\n  }\n\n  const hideWaiting = () => {\n    self.element.querySelectorAll('.loading')[0].style.display = 'none'\n  }\n\n  const showError = () => {\n    let loading = self.element.querySelectorAll('.loading')[0]\n    loading.querySelectorAll('.waiting-icon')[0].style.display = 'none'\n    loading.querySelectorAll('.error-icon').style.display = ''\n    loading.style.display = ''\n  }\n\n  const destroy = () => {\n    window.cancelAnimationFrame(self.requestAnimationId)\n    self.requestAnimationId = ''\n    self.texture.dispose()\n    self.scene.parentNode.removeChild(self.mesh)\n    if (self.isVideo) {\n      unloadVideo()\n    }\n    self.renderer.parentNode.removeChild()\n  }\n\n  return {\n    attachContainer,\n    attachVideo\n  }\n}\n\nmodule.exports = ThreeSixty\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/threesixty.js\n **/"],"sourceRoot":""}
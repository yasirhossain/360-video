{"version":3,"sources":["webpack:///webpack/bootstrap 989c02dc32add54599a1","webpack:///./src/threesixty.js"],"names":["ThreeSixty","THREE","Detector","window","document","undefined","self","defaults","crossOrigin","clickAndDrag","keyboardControls","fov","fovMin","fovMax","hideControls","lon","lat","loop","debug","flatProjection","autoplay","div","video","attachContainer","element","options","time","Date","getTime","controls","id","generateUUID","requestAnimationId","isVideo","isPhoto","isFullscreen","mouseDown","dragStart","originalWidth","querySelectorAll","offsetWidth","originalHeight","offsetHeight","classList","add","className","getAttribute","setAttribute","attachVideo","createMediaPlayer","createControls","d","uuid","replace","c","r","Math","random","floor","toString","scene","Scene","camera","PerspectiveCamera","setLens","renderer","webgl","WebGLRenderer","CanvasRenderer","setSize","autoClear","setClearColor","appendChild","domElement","createAnimation","texture","generateMipmaps","minFilter","LinearFilter","magFilter","format","RGBFormat","mesh","Mesh","SphereGeometry","MeshBasicMaterial","map","scale","x","animate","ImageUtils","loadTexture","isIE","loadingElem","createElement","innerHTML","showWaiting","style","display","addEventListener","percent","buffered","length","end","duration","bytesTotal","bufferedBytes","cpct","round","event","console","error","showError","paused","currentTime","children","durMin","durSec","timeMin","timeSec","navigator","appName","userAgent","match","videocanvas","Texture","width","videoWidth","height","videoHeight","xhr","XMLHttpRequest","open","responseType","onload","e","srcElement","status","vid","URL","createObjectURL","response","hideWaiting","play","videoReady","src","onreadystatechange","oEvent","readyState","send","log","playPauseControl","controlsElem","attachControlEvents","onMouseMove","bind","onMouseWheel","onMouseDown","onMouseUp","onKeyDown","onKeyUp","onKeyArrowPress","focus","onresize","resizeGL","onPointerDownPointerX","clientX","onPointerDownPointerY","clientY","rect","getBoundingClientRect","relativeX","pageX","left","onPointerDownLon","onPointerDownLat","y","pageY","top","wheelSpeed","wheelDeltaY","wheelDelta","detail","preventDefault","onProgressClick","HAVE_ENOUGH_DATA","keyCode","keydown","pressEvent","createEvent","initCustomEvent","dispatchEvent","offset","pressDelay","setTimeout","requestAnimationFrame","getContext","drawImage","ct","needsUpdate","render","max","min","phi","PI","theta","cx","sin","cos","cy","cz","lookAt","Vector3","position","z","clear","pause","loadVideo","videoFile","unloadVideo","loadPhoto","photoFile","w","h","aspect","updateProjectionMatrix","loading","destroy","cancelAnimationFrame","dispose","parentNode","removeChild","module","exports"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/public/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 989c02dc32add54599a1\n **/","// TODO strip out options\n// TODO strip out video data source and add video html element to grab src\n\nconst ThreeSixty = (THREE, Detector, window, document, undefined) => {\n  let self = {},\n      defaults = {\n        crossOrigin: 'anonymous',\n        clickAndDrag: false,\n\t      keyboardControls: true,\n        fov: 35,\n        fovMin: 3,\n        fovMax: 100,\n        hideControls: false,\n        lon: 0,\n        lat: 0,\n        loop: \"loop\",\n        debug: false,\n        flatProjection: false,\n        autoplay: true\n      },\n      div,\n      video\n\n  const attachContainer = (element) => {\n    self.element = element\n    self.options = defaults\n\n    // instantiate some local variables we're going to need\n    self.time = new Date().getTime()\n    self.controls = {}\n    self.id = generateUUID()\n\n    self.requestAnimationId = '' // used to cancel requestAnimationFrame on destroy\n    self.isVideo = false\n    self.isPhoto = false\n    self.isFullscreen = false\n    self.mouseDown = false\n    self.dragStart = {}\n\n    self.lat = self.options.lat;\n    self.lon = self.options.lon;\n    self.fov = self.options.fov;\n\n    // save our original height and width for returning from fullscreen\n    self.originalWidth = self.element.querySelectorAll('canvas').offsetWidth\n    self.originalHeight = self.element.querySelectorAll('canvas').offsetHeight\n\n    // add a class to our element so it inherits the appropriate styles\n    if (self.element.classList)\n      self.element.classList.add('default')\n    else\n      self.element.className += ' ' + 'default'\n\n    // add tabindex attribute to enable the focus on the element (required for keyboard controls)\n    if(self.options.keyboardControls && !self.element.getAttribute(\"tabindex\")) {\n      self.element.setAttribute(\"tabindex\", \"1\")\n    }\n  }\n\n  const attachVideo = (element) => {\n    video = element\n    createMediaPlayer()\n    createControls()\n  }\n\n  const generateUUID = () => {\n    let d = new Date().getTime(),\n        uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n          let r = (d + Math.random()*16)%16 | 0\n          d = Math.floor(d/16);\n          return (c==='x' ? r : (r&0x7|0x8)).toString(16);\n        })\n    return uuid\n  }\n\n  const createMediaPlayer = () => {\n    // make a self reference we can pass to our callbacks\n    // create a local THREE.js scene\n    self.scene = new THREE.Scene()\n\n    // create ThreeJS camera\n    self.camera = new THREE.PerspectiveCamera(self.fov, self.element.offsetWidth / self.element.offsetHeight, 0.1, 1000)\n    self.camera.setLens(self.fov)\n\n    // create ThreeJS renderer and append it to our object\n    self.renderer = Detector.webgl? new THREE.WebGLRenderer(): new THREE.CanvasRenderer()\n    self.renderer.setSize(self.element.offsetWidth, self.element.offsetHeight)\n    self.renderer.autoClear = false\n    self.renderer.setClearColor(0x333333, 1)\n\n    // append the rendering element to self div\n    self.element.appendChild(self.renderer.domElement)\n\n    const createAnimation = () => {\n      self.texture.generateMipmaps = false\n      self.texture.minFilter = THREE.LinearFilter\n      self.texture.magFilter = THREE.LinearFilter\n      self.texture.format = THREE.RGBFormat\n\n      // create ThreeJS mesh sphere onto which our texture will be drawn\n      self.mesh = new THREE.Mesh(new THREE.SphereGeometry( 500, 80, 50 ), new THREE.MeshBasicMaterial({map: self.texture}))\n      self.mesh.scale.x = -1 // mirror the texture, since we're looking from the inside out\n      self.scene.add(self.mesh)\n\n      animate()\n    }\n\n    // figure out our texturing situation, based on what our source is\n    if(self.element.getAttribute('data-photo-src')) {\n      self.isPhoto = true\n      THREE.ImageUtils.crossOrigin = self.options.crossOrigin\n      self.texture = THREE.ImageUtils.loadTexture(self.element.getAttribute('data-photo-src'))\n      createAnimation()\n    } else {\n      if (video) {\n        // create loading overlay\n        let loadingElem = document.createElement('div')\n        if (loadingElem.classList)\n          loadingElem.classList.add('loading');\n        else\n          loadingElem.className += ' ' + 'loading'\n\n        loadingElem.innerHTML = `\n          <div class=\"icon waiting-icon\"></div>\n          <div class=\"icon error-icon\"><i class=\"fa fa-exclamation-triangle\" aria-hidden=\"true\"></i></div>\n        `\n        self.element.appendChild(loadingElem)\n        showWaiting()\n\n        self.isVideo = true\n\n        self.video = video\n        self.video.setAttribute('crossorigin', self.options.crossOrigin)\n        self.video.style.display = 'none'\n        self.video.loop = self.options.loop\n\n        // attach video player event listeners\n        self.video.addEventListener(\"ended\", () => {})\n\n        // Progress Meter\n        self.video.addEventListener(\"progress\", () => {\n          let percent = null\n          if (self.video && self.video.buffered && self.video.buffered.length > 0 && self.video.buffered.end && self.video.duration) {\n            percent = self.video.buffered.end(0) / self.video.duration\n          }\n          // Some browsers (e.g., FF3.6 and Safari 5) cannot calculate target.bufferered.end()\n          // to be anything other than 0. If the byte count is available we use self instead.\n          // Browsers that support the else if do not seem to have the bufferedBytes value and\n          // should skip to there. Tested in Safari 5, Webkit head, FF3.6, Chrome 6, IE 7/8.\n          else if (self.video && self.video.bytesTotal !== undefined && self.video.bytesTotal > 0 && self.video.bufferedBytes !== undefined) {\n            percent = self.video.bufferedBytes / self.video.bytesTotal\n          }\n\n          // Someday we can have a loading animation for videos\n          var cpct = Math.round(percent * 100)\n          if(cpct === 100) {\n            // do something now that we are done\n          } else {\n            // do something with self percentage info (cpct)\n          }\n        })\n\n        // Error listener\n        self.video.addEventListener('error', (event) => {\n          console.error(self.video.error)\n          showError()\n        })\n\n        self.video.addEventListener(\"timeupdate\", () => {\n          if (self.paused === false){\n            let percent = self.currentTime * 100 / self.duration\n            self.element.querySelectorAll('.controlsWrapper > .progress-bar')[0].children[0].setAttribute(\"style\", \"width:\" + percent + \"%;\")\n            self.element.querySelectorAll('.controlsWrapper > .progress-bar')[0].children[1].setAttribute(\"style\", \"width:\" + (100 - percent) + \"%;\")\n            //Update time label\n            let durMin = Math.floor(self.duration / 60),\n                durSec = Math.floor(self.duration - (durMin * 60)),\n                timeMin = Math.floor(self.currentTime / 60),\n                timeSec = Math.floor(self.currentTime - (timeMin * 60)),\n                duration = durMin + ':' + (durSec < 10 ? '0' + durSec : durSec),\n                currentTime = timeMin + ':' + (timeSec < 10 ? '0' + timeSec : timeSec)\n            self.element.querySelectorAll('.controls .timeLabel').innerHTML = (currentTime + ' / ' + duration)\n          }\n        })\n\n        // IE 11 and previous not supports THREE.Texture([video]), we must create a canvas that draws the video and use that to create the Texture\n        var isIE = navigator.appName == 'Microsoft Internet Explorer' || !!(navigator.userAgent.match(/Trident/) || navigator.userAgent.match(/rv 11/))\n        if (isIE) {\n          self.videocanvas = document.createElement('canvas')\n          self.texture = new THREE.Texture(self.videocanvas)\n          // set canvas size = video size when known\n          self.video.addEventListener('loadedmetadata', () => {\n            self.videocanvas.width = self.video.videoWidth;\n            self.videocanvas.height = self.video.videoHeight;\n            createAnimation()\n          })\n        } else {\n          self.texture = new THREE.Texture( self.video )\n        }\n\n        //force browser caching of the video to solve rendering errors with big videos\n        let xhr = new XMLHttpRequest()\n        xhr.open('GET', self.video.getAttribute('src'), true)\n        xhr.responseType = 'blob'\n        xhr.onload = function (e) {\n          if (e.srcElement.status === 200) {\n            let vid = URL.createObjectURL(e.srcElement.response)\n            //Video Play Listener, fires after video loads\n            self.video.addEventListener(\"canplaythrough\", () => {\n              if (self.options.autoplay === true) {\n                hideWaiting()\n                play()\n                self.videoReady = true\n              }\n            })\n\n            // set the video src and begin loading\n            self.video.src = vid\n          }\n        };\n\n        xhr.onreadystatechange = (oEvent) => {\n          if (xhr.readyState === 4) {\n            if (xhr.status !== 200) {\n              console.error('Video error: status ' + xhr.status)\n              showError()\n            }\n          }\n        }\n        xhr.send()\n\n        if(!isIE) createAnimation()\n      } else {\n        console.log(`Please add a video`)\n      }\n    }\n  }\n\n  const createControls = () => {\n    let playPauseControl = self.options.autoplay ? 'fa-pause' : 'fa-play',\n        controlsElem = document.createElement('div')\n\n    if (controlsElem.classList)\n      controlsElem.classList.add('controlsWrapper')\n    else\n      controlsElem.className += ' ' + 'controlsWrapper'\n\n    controlsElem.innerHTML = `\n      <div class=\"progress-bar\">\n        <div style=\"width: 0;\"></div><div style=\"width: 100%;\"></div>\n      </div>\n      <div class=\"controls\">\n        <a href=\"#\" class=\"playButton button fa '+ playPauseControl +'\"></a>\n        <span class=\"timeLabel\"></span>\n        <a href=\"#\" class=\"fullscreenButton button fa fa-expand\"></a>\n      </div>`\n\n    self.element.appendChild(controlsElem)\n\n    // hide controls if option is set\n    if(self.options.hideControls) {\n      self.element.querySelectorAll('.controls').style.display = 'none'\n    }\n\n    // wire up controller events to dom elements\n    attachControlEvents()\n  }\n\n  const attachControlEvents = () => {\n    self.element.addEventListener( 'mousemove', onMouseMove.bind(self), false )\n    self.element.addEventListener( 'touchmove', onMouseMove.bind(self), false )\n    self.element.addEventListener( 'mousewheel', onMouseWheel.bind(self), false )\n    self.element.addEventListener( 'DOMMouseScroll', onMouseWheel.bind(self), false )\n    self.element.addEventListener( 'mousedown', onMouseDown.bind(self), false)\n    self.element.addEventListener( 'touchstart', onMouseDown.bind(self), false)\n    self.element.addEventListener( 'mouseup', onMouseUp.bind(self), false)\n    self.element.addEventListener( 'touchend', onMouseUp.bind(self), false)\n\n    if(self.options.keyboardControls) {\n      self.element.addEventListener('keydown', onKeyDown.bind(self), false)\n      self.element.addEventListener('keyup', onKeyUp.bind(self), false)\n      // Used custom press event because for the arrow buttons is not throws the 'keypress' event\n      self.element.addEventListener('keyArrowPress', onKeyArrowPress.bind(self), false)\n      self.element.addEventListener('click', () => {\n        self.element.focus()\n      },false)\n    }\n\n    window.onresize = () => {\n      resizeGL(self.element.offsetWidth, self.element.offsetHeight)\n    }\n  }\n\n  const onMouseMove = (event) => {\n    self.onPointerDownPointerX = event.clientX\n    self.onPointerDownPointerY = -event.clientY\n\n    let rect = self.element.querySelectorAll('canvas')[0].getBoundingClientRect()\n    self.relativeX = event.pageX - rect.left\n\n    self.onPointerDownLon = self.lon\n    self.onPointerDownLat = self.lat\n\n    let x, y\n\n    if(self.options.clickAndDrag) {\n      if(self.mouseDown) {\n        x = event.pageX - self.dragStart.x\n        y = event.pageY - self.dragStart.y\n        self.dragStart.x = event.pageX\n        self.dragStart.y = event.pageY\n        self.lon += x\n        self.lat -= y\n      }\n    } else {\n      x = event.pageX - rect.left\n      y = event.pageY - rect.top\n\n      self.lon = ( x / self.element.querySelectorAll('canvas')[0].offsetWidth ) * 430 - 225\n      self.lat = ( y / self.element.querySelectorAll('canvas')[0].offsetHeight ) * -180 + 90\n    }\n  }\n\n  const onMouseWheel = (event) => {\n    let wheelSpeed = -0.01\n\n    // WebKit\n    if (event.wheelDeltaY) {\n      self.fov -= event.wheelDeltaY * wheelSpeed\n    // Opera / Explorer 9\n    } else if (event.wheelDelta) {\n      self.fov -= event.wheelDelta * wheelSpeed\n    // Firefox\n    } else if (event.detail) {\n      self.fov += event.detail * 1.0\n    }\n\n    if(self.fov < self.options.fovMin) {\n      self.fov = self.options.fovMin\n    } else if(self.fov > self.options.fovMax) {\n      self.fov = self.options.fovMax\n    }\n\n    self.camera.setLens(self.fov)\n    event.preventDefault()\n  }\n\n  const onMouseDown = (event) => {\n    self.mouseDown = true\n    self.dragStart.x = event.pageX\n    self.dragStart.y = event.pageY\n  }\n\n  const onProgressClick = (event) => {\n    if(self.isVideo && self.video.readyState === self.video.HAVE_ENOUGH_DATA) {\n      let percent =  self.relativeX / self.element.querySelectorAll('canvas').offsetWidth * 100\n      self.element.querySelectorAll('.controlsWrapper > .progress-bar')[0].children[0].setAttribute(\"style\", \"width:\" + percent + \"%;\")\n      self.element.querySelectorAll('.controlsWrapper > .progress-bar')[0].children[1].setAttribute(\"style\", \"width:\" + (100 - percent) + \"%;\")\n      self.video.currentTime = self.video.duration * percent / 100\n    }\n  }\n\n  const onMouseUp = (event) => {\n    self.mouseDown = false\n  }\n\n  const onKeyDown = (event) => {\n   let keyCode = event.keyCode\n   if (keyCode >= 37 && keyCode <= 40) {\n     event.preventDefault()\n     self.keydown = true\n     let pressEvent = document.createEvent('CustomEvent')\n     pressEvent.initCustomEvent(\"keyArrowPress\",true,true,{'keyCode':keyCode})\n     self.element.dispatchEvent(pressEvent)\n   }\n  }\n\n  const onKeyUp = (event) => {\n   let keyCode = event.keyCode;\n   if (keyCode >= 37 && keyCode <= 40) {\n     event.preventDefault()\n     self.keydown = false\n   }\n  }\n\n  const onKeyArrowPress = (event) => {\n   if (self.keydown) {\n     let keyCode = event.detail? event.detail.keyCode:null,\n         offset = 3,\n         pressDelay = 50,\n         element = self.element\n\n     event.preventDefault()\n     switch (keyCode) {\n       //Arrow left\n       case 37: self.lon -= offset;\n         break;\n       //Arrow right\n       case 39: self.lon += offset;\n         break;\n       //Arrow up\n       case 38: self.lat += offset;\n         break;\n       //Arrow down\n       case 40: self.lat -= offset;\n         break;\n     }\n     setTimeout(() => {\n       let pressEvent = document.createEvent('CustomEvent')\n       pressEvent.initCustomEvent(\"keyArrowPress\",true,true,{'keyCode':keyCode})\n       element.dispatchEvent(pressEvent)\n     },\n     pressDelay)\n   }\n  }\n\n  const animate = () => {\n    // set our animate function to fire next time a frame is ready\n    self.requestAnimationId = requestAnimationFrame(animate.bind(self))\n\n    if(self.isVideo) {\n      if ( self.video.readyState === self.video.HAVE_ENOUGH_DATA) {\n        if(self.videocanvas) {\n          self.videocanvas.getContext('2d').drawImage(self.video, 0, 0, self.videocanvas.width, self.videocanvas.height)\n        }\n        if(typeof(self.texture) !== \"undefined\" ) {\n          let ct = new Date().getTime()\n          if(ct - self.time >= 30) {\n            self.texture.needsUpdate = true\n            self.time = ct\n          }\n        }\n      }\n    }\n    render()\n  }\n\n  const render = () => {\n    self.lat = Math.max( - 85, Math.min( 85, self.lat))\n    self.phi = ( 90 - self.lat ) * Math.PI / 180\n    self.theta = self.lon * Math.PI / 180\n\n    let cx = 500 * Math.sin( self.phi ) * Math.cos( self.theta ),\n        cy = 500 * Math.cos( self.phi ),\n        cz = 500 * Math.sin( self.phi ) * Math.sin( self.theta )\n\n    self.camera.lookAt(new THREE.Vector3(cx, cy, cz))\n\n    // distortion\n    if(self.options.flatProjection) {\n      self.camera.position.x = 0\n      self.camera.position.y = 0\n      self.camera.position.z = 0\n    } else {\n      self.camera.position.x = - cx\n      self.camera.position.y = - cy\n      self.camera.position.z = - cz\n    }\n\n    self.renderer.clear()\n    self.renderer.render( self.scene, self.camera )\n  }\n\n  const play = () => {\n    //code to play media\n    self.video.play()\n  }\n\n  const pause = () => {\n    //code to stop media\n    self.video.pause()\n  }\n\n  const loadVideo = (videoFile) => {\n    self.video.src = videoFile\n  }\n\n  const unloadVideo = () => {\n    // overkill unloading to avoid dreaded video 'pending' bug in Chrome. See https://code.google.com/p/chromium/issues/detail?id=234779\n    self.pause()\n    self.video.src = ''\n    self.video.setAttribute('src', '')\n  }\n\n  const loadPhoto = (photoFile) => {\n    self.texture = THREE.ImageUtils.loadTexture( photoFile );\n  }\n\n  const resizeGL = (w, h) => {\n    self.renderer.setSize(w, h)\n    self.camera.aspect = w / h\n    self.camera.updateProjectionMatrix()\n  }\n\n  const showWaiting = () => {\n    let loading = self.element.querySelectorAll('.loading')[0]\n    loading.querySelectorAll('.waiting-icon')[0].style.display = ''\n    loading.querySelectorAll('.error-icon')[0].style.display = 'none'\n    loading.style.display = ''\n  }\n\n  const hideWaiting = () => {\n    self.element.querySelectorAll('.loading')[0].style.display = 'none'\n  }\n\n  const showError = () => {\n    let loading = self.element.querySelectorAll('.loading')[0]\n    loading.querySelectorAll('.waiting-icon')[0].style.display = 'none'\n    loading.querySelectorAll('.error-icon').style.display = ''\n    loading.style.display = ''\n  }\n\n  const destroy = () => {\n    window.cancelAnimationFrame(self.requestAnimationId)\n    self.requestAnimationId = ''\n    self.texture.dispose()\n    self.scene.parentNode.removeChild(self.mesh)\n    if (self.isVideo) {\n      unloadVideo()\n    }\n    self.renderer.parentNode.removeChild()\n  }\n\n  return {\n    attachContainer,\n    attachVideo\n  }\n}\n\nmodule.exports = ThreeSixty\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/threesixty.js\n **/"],"sourceRoot":""}